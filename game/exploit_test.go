package game

import (
	"testing"

	"github.com/stretchr/testify/require"
)

func TestPlatformExploit(t *testing.T) {
	gameMap := NewMap("testdata/devmap.json")
	testTeam := NewTeam("Red", "A", gameMap)
	startNode := testTeam.StartNode
	testTeam.Scan(startNode.IPAddr)
	testTeam.ServiceExploit(startNode.IPAddr, "http")
	require.Equal(t, true, testTeam.DiscoveredNodes[0].NodeOwned)
}

func TestServiceExploit(t *testing.T) {
	gameMap := NewMap("testdata/devmap.json")
	testTeam := NewTeam("Red", "A", gameMap)
	startNode := testTeam.StartNode
	testTeam.Scan(startNode.IPAddr)
	testTeam.PlatformExploit(startNode.IPAddr)
	require.Equal(t, true, testTeam.DiscoveredNodes[0].NodeOwned)
}
